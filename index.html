<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Learning Journey</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>My Learning Journey</h1>
    </header>

    <nav>
        <ul id="categoryNav" class="category-nav">
            <!-- カテゴリナビゲーションはJavaScriptで動的に生成 -->
        </ul>
    </nav>

    <main class="container">
        <section id="articleGrid" class="article-grid">
            <!-- 記事一覧はJavaScriptで動的に生成 -->
        </section>
    </main>

    <script type="module">
        import CategoryManager from './categories.js';
        import { displayArticleList } from './articles.js';

        // カテゴリナビゲーションの生成
        document.getElementById('categoryNav').innerHTML = CategoryManager.generateNavMenu();

        // 記事一覧の表示
        displayArticleList('articleGrid');

        // カテゴリフィルタリングの設定
        document.querySelectorAll('.category-link, #allLink').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const categoryId = e.target.id.replace('Link', '');
                
                // アクティブなカテゴリの表示を更新
                document.querySelectorAll('.category-link, #allLink').forEach(l => 
                    l.classList.remove('active'));
                e.target.classList.add('active');

                // 記事のフィルタリング
                const articles = document.querySelectorAll('.article-card');
                articles.forEach(article => {
                    if (categoryId === 'all') {
                        article.style.display = 'block';
                    } else {
                        const category = CategoryManager.getCategoryById(categoryId);
                        article.style.display = 
                            article.dataset.category === category.slug ? 'block' : 'none';
                    }
                });
            });
        });
    </script>
</body>
</html>